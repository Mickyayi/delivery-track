<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIF动画测试 - 智能司机图标</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .icon-test {
            display: inline-block;
            margin: 20px;
            text-align: center;
        }
        
        .icon-test img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #ffffff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            display: block;
            margin: 0 auto 10px;
        }
        
        .map-style {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .status {
            color: #666;
            font-size: 12px;
            margin-top: 5px;
        }
        
        h1 {
            color: #333;
            text-align: center;
        }
        
        h2 {
            color: #555;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }
        
        .test-info {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>🎬 GIF动画测试 - 智能司机图标系统</h1>
    
    <div class="test-info">
        <strong>📋 测试目的:</strong> 验证智能司机图标的GIF动画是否正常播放
        <br><strong>🎯 预期结果:</strong> 所有GIF图标应该显示动画效果，不应该是静态图片
    </div>
    
    <div class="test-container">
        <h2>🖥️ 原始大小测试 (100x100px)</h2>
        
        <div class="icon-test">
            <img src="./normal.gif" alt="正常配送">
            <div><strong>normal.gif</strong></div>
            <div class="status">正常配送状态</div>
        </div>
        
        <div class="icon-test">
            <img src="./late.gif" alt="延误配送">
            <div><strong>late.gif</strong></div>
            <div class="status">延误配送状态</div>
        </div>
        
        <div class="icon-test">
            <img src="./rain.gif" alt="雨天配送">
            <div><strong>rain.gif</strong></div>
            <div class="status">雨天配送状态</div>
        </div>
        
        <div class="icon-test">
            <img src="./driver.gif" alt="备用图标">
            <div><strong>driver.gif</strong></div>
            <div class="status">备用图标</div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>🗺️ 地图样式测试 (70x70px，模拟地图显示)</h2>
        
        <div class="icon-test">
            <img src="./normal.gif" alt="正常配送" class="map-style">
            <div><strong>地图中的normal.gif</strong></div>
        </div>
        
        <div class="icon-test">
            <img src="./late.gif" alt="延误配送" class="map-style">
            <div><strong>地图中的late.gif</strong></div>
        </div>
        
        <div class="icon-test">
            <img src="./rain.gif" alt="雨天配送" class="map-style">
            <div><strong>地图中的rain.gif</strong></div>
        </div>
        
        <div class="icon-test">
            <img src="./driver.gif" alt="备用图标" class="map-style">
            <div><strong>地图中的driver.gif</strong></div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>🔧 动态加载测试</h2>
        <p>点击按钮测试动态切换图标:</p>
        
        <div id="dynamic-test" style="text-align: center; margin: 20px 0;">
            <img id="dynamic-icon" src="./normal.gif" class="map-style" alt="动态图标">
            <br>
            <span id="current-status">当前: normal.gif</span>
        </div>
        
        <div style="text-align: center;">
            <button onclick="switchIcon('normal')">正常配送</button>
            <button onclick="switchIcon('late')">延误配送</button>
            <button onclick="switchIcon('rain')">雨天配送</button>
            <button onclick="switchIcon('driver')">备用图标</button>
        </div>
    </div>
    
    <div class="test-container">
        <h2>📊 测试结果记录</h2>
        <div id="test-results">
            <p>✅ 如果看到动画效果，说明GIF正常工作</p>
            <p>❌ 如果只显示静态图片，可能的原因:</p>
            <ul>
                <li>浏览器缓存问题</li>
                <li>GIF文件格式问题</li>
                <li>CSS样式干扰</li>
                <li>文件路径错误</li>
            </ul>
        </div>
    </div>

    <script>
        function switchIcon(type) {
            const iconElement = document.getElementById('dynamic-icon');
            const statusElement = document.getElementById('current-status');
            
            const icons = {
                'normal': './normal.gif',
                'late': './late.gif', 
                'rain': './rain.gif',
                'driver': './driver.gif'
            };
            
            if (icons[type]) {
                // 添加随机参数强制重新加载
                const timestamp = new Date().getTime();
                iconElement.src = icons[type] + '?t=' + timestamp;
                statusElement.textContent = `当前: ${type}.gif`;
                
                console.log(`切换到: ${type}.gif`);
            }
        }
        
        // 页面加载时检查图片
        window.addEventListener('load', function() {
            const images = document.querySelectorAll('img[src$=".gif"]');
            console.log(`📊 检测到 ${images.length} 个GIF图片`);
            
            images.forEach((img, index) => {
                img.addEventListener('load', function() {
                    console.log(`✅ GIF加载成功: ${this.src}`);
                });
                
                img.addEventListener('error', function() {
                    console.error(`❌ GIF加载失败: ${this.src}`);
                });
            });
        });
    </script>
</body>
</html>
